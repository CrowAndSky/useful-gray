<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>Useful Gray POC</title>
  <script type="text/javascript" src="jquery.js"></script>
<style type="text/css">
.image-svg, html, body, div, span, section, svg, ul, li, h1, h2, h3, h4, h5 {
  box-sizing: border-box;
  color: #222;
  margin: 0;
  padding: 0;
}
ul, li {
  list-style: none;
}
#wrapper,
.image-svg,
.desaturater {
  height: calc( 50% - 2px);
  max-width: 1000px;
  max-height: 500px;
  width: 100%;
}
#wrapper {
  height: 100vw;
  max-height: 1000px;
  overflow: hidden;
  position: relative;
}
.desaturater {
  border-radius: 0 0 10vw 10vw;
  display: none;
  height: 0;
  left: 0;
  max-height: 1100px;
  position: absolute;
  top: 0;
  transition: height 3.5s;
  width: 20vw;
  z-index: 9;
}
.desaturated .desaturater {
  height: 120%;
}
.desaturater-1 {
  left: 0;
  transition-delay: 0.8s;
  width: 20%;
}
.desaturater-2 {
  left: 20%;
  width: 10%;
}
.desaturater-3 {
  left: 30%;
  transition-delay: 8s;
  width: 14.6%;
}
.desaturater-4 {
  left: 44.6%;
  width: 10.4%;
}
.desaturater-5 {
  left: 55%;
  transition-delay: 1.2s;
  width: 8%;
}
.desaturater-6 {
  left: 63%;
  transition-delay: 0.5s;
  /*transition: 2s;*/
  width: 22%;
}
.desaturater-7 {
  left: 85%;
  width: 15%;
}
.dyc-logo {
  bottom: -5%;
  display: block;
  left: 26.5%;
  position: absolute;
  top: -45%;
  transition: top 3.5s;
  width: 20%;
  z-index: 100;
}
.desaturated .dyc-logo {
  top: calc( 70% );
}
body {
  background-image: url('s-w.png');
  background-position: 50% 0;
  /*margin: 0 auto;
  max-width: 100%;*/
}


/* support backdrop-filter */
@supports ( (-webkit-backdrop-filter: blur(1px)) or (backdrop-filter: blur(1px)) ) {
  .desaturater {
    display: block;
    -webkit-backdrop-filter: grayscale(100%);
    backdrop-filter: grayscale(100%);
  }
}
</style>
</head>
<body>

<div id="wrapper" class="colors-all">

<img class="dyc-logo" src="DYC-brush.png"></img>
<div class="desaturater desaturater-1"></div>
<div class="desaturater desaturater-2"></div>
<div class="desaturater desaturater-3"></div>
<div class="desaturater desaturater-4"></div>
<div class="desaturater desaturater-5"></div>
<div class="desaturater desaturater-6"></div>
<div class="desaturater desaturater-7"></div>

</div> <!-- close wrapper -->

<script type="text/javascript">
$( window ).ready( function(){

var isPageGrayscale = false,
    currentGrayscale,
    //currentContrast = 1,
    requestAnimationLoopIndex,
    requestAnimationID,
    animationLoopLength = 100,
    animationLoopIncrement = 1 / animationLoopLength,
    animationLoopContrastIncrement = 2 * animationLoopIncrement,
    desaturateTargets = $( '.dyc-logo' ),
    desaturateEntirePage = function() {
      if ( requestAnimationLoopIndex > animationLoopLength ) {
        cancelAnimationFrame( requestAnimationID );
      } else {
        currentGrayscale = currentGrayscale + animationLoopIncrement;
        // if ( requestAnimationLoopIndex < animationLoopLength / 2 ) {
        //   currentContrast = currentContrast + animationLoopContrastIncrement;
        // } else {
        //   currentContrast = currentContrast - animationLoopContrastIncrement;
        // }
        // desaturateTargets.css( "filter", "grayscale(" + currentGrayscale + ") contrast(" + currentContrast + ")" );
        desaturateTargets.css( "filter", "grayscale(" + currentGrayscale + "%)" );
        requestAnimationLoopIndex++;
        requestAnimationID = requestAnimationFrame( desaturateEntirePage );
      }
    };

$( 'body' ).click(function(){
  requestAnimationLoopIndex = 1;
  //$( 'body' ).toggleClass( 'desaturated');
  if ( isPageGrayscale ) {
    currentGrayscale = 100;
    isPageGrayscale = false;
    $( 'body' ).removeClass( 'desaturated');
    animationLoopIncrement = math.Round( -1 / animationLoopLength );

    window.setTimeout( function(){
      requestAnimationID = requestAnimationFrame( desaturateEntirePage );
    }, 1000);
  } else {
    isPageGrayscale = true;
    currentGrayscale = 0;
    $( 'body' ).addClass( 'desaturated');
    animationLoopIncrement = math.Round( 1 / animationLoopLength );
    requestAnimationID = requestAnimationFrame( desaturateEntirePage );
  }

});


}); // END $( window ).ready

</script>
</body>
</html>